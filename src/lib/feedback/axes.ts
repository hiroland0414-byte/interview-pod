// src/lib/feedback/axes.ts
import type { ModeTag } from "@/lib/questions";

export type Axis = "熱意" | "チームワーク" | "思いやり" | "挑戦心" | "主体性";

export type AxisRule = {
  axis: Axis;
  // 観点が「ある」と判定するキーワード群（ゆるめでOK）
  keywords: string[];
  // 無いときに言う「厳しめ指摘」
  missingCritique: string;
  // あったときに言う「評価」
  presentPraise: string;
};

export function requiredAxes(mode: ModeTag): AxisRule[] {
  // 病院（A1/A2）と健診（B）：熱意・チームワーク・思いやりがコア
  if (mode === "A1" || mode === "A2" || mode === "B") {
    return [
      {
        axis: "熱意",
        keywords: ["志望", "貢献", "学びたい", "挑戦", "成長", "本気", "強く", "将来"],
        missingCritique:
          "熱意が文章から伝わりにくいです。『やりたい』は書けていても、根拠（施設の特徴×自分の貢献）が弱いと“どこでも言える話”に見えます。",
        presentPraise:
          "熱意は一定伝わっています。特に「なぜそこで、何に貢献するか」が言語化できている点は評価できます。",
      },
      {
        axis: "チームワーク",
        keywords: ["報連相", "連携", "チーム", "共有", "相談", "協力", "多職種", "コミュニケーション"],
        missingCritique:
          "チームワーク（報連相・連携）の材料が不足しています。医療現場は“個の優秀さ”より“連携の安全性”が評価軸です。協働の具体がないとリスクに見えます。",
        presentPraise:
          "チームワークへの意識（報連相・連携）が読み取れます。現場での安全と品質に直結する観点なので、ここは強みになり得ます。",
      },
      {
        axis: "思いやり",
        keywords: ["患者", "受診者", "安心", "配慮", "不安", "説明", "寄り添", "傾聴", "尊重"],
        missingCritique:
          "思いやり（患者さん／受診者への配慮）の描写が弱いです。技術職でも看護でも、最後は“相手の不安をどう減らすか”が問われます。具体の関わり方を入れてください。",
        presentPraise:
          "患者さん／受診者への配慮が具体的に書けています。相手の不安を下げる工夫が見えるのは、面接官に安心感を与えます。",
      },
    ];
  }

  // 企業（C）：熱意・挑戦心・チームワーク・主体性がコア（思いやりは必須軸から外す）
  return [
    {
      axis: "熱意",
      keywords: ["志望", "貢献", "成長", "学び", "本気", "将来", "やりたい"],
      missingCritique:
        "熱意が弱いです。企業では“やりたい”より“なぜそれをやるのか”の論理と根拠が問われます。市場・業界・企業の特徴と、自分の役割を結んでください。",
      presentPraise:
        "熱意は伝わっています。特に「なぜこの領域で、何を実現したいか」が具体に寄っている点は強いです。",
    },
    {
      axis: "挑戦心",
      keywords: ["挑戦", "新しい", "改善", "試行錯誤", "学習", "未経験", "乗り越"],
      missingCritique:
        "挑戦心（変化に向き合う姿勢）が見えません。企業では環境が変わる前提なので、未知への取り組み方が語れないと評価が伸びにくいです。",
      presentPraise:
        "挑戦心が読み取れます。試行錯誤のプロセスを語れているのは、企業面接で強い材料です。",
    },
    {
      axis: "チームワーク",
      keywords: ["チーム", "巻き込", "共有", "相談", "協力", "連携", "調整"],
      missingCritique:
        "チームで成果を出す材料が不足しています。企業では“個人の努力”より“周囲を動かして成果にしたか”が評価されます。巻き込みの具体が必要です。",
      presentPraise:
        "協働・巻き込みが具体に語れています。これは配属後の再現性が高い材料として評価できます。",
    },
    {
      axis: "主体性",
      keywords: ["自分で", "提案", "企画", "主導", "意思決定", "課題設定", "改善案"],
      missingCritique:
        "主体性（自分で課題を見つけ、動いた形）が弱いです。学チカは“出来事”ではなく“あなたの意思決定”が評価対象なので、判断基準まで出してください。",
      presentPraise:
        "主体性が見えます。課題設定→行動→結果の流れがあり、意思決定の軸が語れているのは強いです。",
    },
  ];
}
